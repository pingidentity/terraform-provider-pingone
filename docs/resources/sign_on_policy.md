---
page_title: "pingone_sign_on_policy Resource - terraform-provider-pingone"
subcategory: "SSO"
description: |-
  Resource to create and manage PingOne sign-on policies in an environment.
---

# pingone_sign_on_policy (Resource)

Resource to create and manage PingOne sign-on policies in an environment.

~> A warning will be issued following `terraform apply` when attempting to remove the final sign-on policy action from an associated sign-on policy.  When removing the final sign-on policy action from a sign-on policy, it's recommended to also remove the associated sign-on policy at the same time.  Further information can be found [here](https://github.com/pingidentity/terraform-provider-pingone/issues/68).

## Example Usage - Sign On Policy With Example Actions

```terraform
resource "pingone_environment" "my_environment" {
  # ...
}

resource "pingone_sign_on_policy" "my_policy" {
  environment_id = pingone_environment.my_environment.id

  name        = "foo"
  description = "My awesome Sign-on policy, username and password followed by MFA"
}

resource "pingone_sign_on_policy_action" "my_policy_first_factor" {
  environment_id    = pingone_environment.my_environment.id
  sign_on_policy_id = pingone_sign_on_policy.my_policy.id

  priority = 1

  conditions {
    last_sign_on_older_than_seconds = 604800 // 7 days
  }

  login {
    recovery_enabled = true
  }
}

resource "pingone_sign_on_policy_action" "my_policy_mfa" {
  environment_id    = pingone_environment.my_environment.id
  sign_on_policy_id = pingone_sign_on_policy.my_policy.id

  priority = 2

  conditions {
    last_sign_on_older_than_seconds = 86400 // 24 hours

    ip_reputation_high_risk      = true
    geovelocity_anomaly_detected = true
    anonymous_network_detected   = true

    user_attribute_equals {
      attribute_reference = "$${user.mfaEnabled}"
      value_boolean       = true
    }

    user_attribute_equals {
      attribute_reference = "$${user.lifecycle.status}"
      value               = "ACCOUNT_OK"
    }
  }

  mfa {
    device_sign_on_policy_id = var.my_device_sign_on_policy_id
    no_device_mode           = "BYPASS"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `environment_id` (String) The ID of the environment to manage the sign-on policy in.  Must be a valid PingOne resource ID.  This field is immutable and will trigger a replace plan if changed.
- `name` (String) A string that specifies the sign on policy name, that is also used as the authentication context when initiating sign-on. The name must be unique within the environment, and can consist of either a string of alphanumeric letters, underscore, hyphen, period (regex `^[a-zA-Z0-9_.-]+$`) or an absolute URI if the string contains a `:` character.

### Optional

- `description` (String) A string that specifies the description to apply to the sign-on policy.

### Read-Only

- `default` (Boolean) A boolean that describes whether this policy should serve as the default sign-on policy for the environment.
- `id` (String) The ID of this resource.

## Import

Import is supported using the following syntax, where attributes in `<>` brackets are replaced with the relevant ID.  For example, `<environment_id>` should be replaced with the ID of the environment to import from.

```shell
terraform import pingone_sign_on_policy.example <environment_id>/<sign_on_policy_id>
```
