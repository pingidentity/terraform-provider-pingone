---
page_title: "pingone_davinci_application_flow_policy Resource - terraform-provider-pingone"
subcategory: "DaVinci"
description: |-
  Resource to create and manage a DaVinci application flow policy.
---

# pingone_davinci_application_flow_policy (Resource)

Resource to create and manage a DaVinci application flow policy.

~> When destroying `pingone_davinci_flow` resources that are referenced in the `flow_distributions` value of a `pingone_davinci_application_flow_policy`, you may need to set `lifecycle.create_before_destroy` to `true` in the application flow policy. This will ensure that the policy is updated first before any flows are destroyed, and will prevent API errors caused by the flows still being referenced in the policy. See the example below.

## Example Usage

```terraform
resource "pingone_davinci_application" "my_awesome_registration_flow_application" {
  environment_id = var.pingone_environment_id

  name = "My Awesome Registration Application"

  oauth {
    grant_types                   = ["authorizationCode"]
    scopes                        = ["openid", "profile"]
    enforce_signed_request_openid = false
    redirect_uris                 = ["https://auth.pingone.com/0000-0000-000/rp/callback/openid_connect"]
  }
}

resource "pingone_davinci_application_flow_policy" "my_awesome_registration_flow_application_policy" {
  environment_id = var.pingone_environment_id
  application_id = pingone_davinci_application.my_awesome_registration_flow_application.id

  name   = "PingOne - Registration"
  status = "enabled"

  flow_distributions = [
    {
      id      = pingone_davinci_flow.registration.id
      version = -1
      weight  = 100
    }
  ]

  # When destroying a pingone_davinci_flow resource referenced in a flow policy, you may need to set lifecycle.create_before_destroy to true.
  # This ensures that the flow policy is updated to remove the reference to the flow before the flow is deleted.
  # lifecycle {
  #   create_before_destroy = true
  # }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `davinci_application_id` (String) This field is immutable and will trigger a replace plan if changed.
- `environment_id` (String) The ID of the environment to create and manage the davinci_application_flow_policy in. Must be a valid PingOne resource ID. This field is immutable and will trigger a replace plan if changed.
- `flow_distributions` (Attributes Set) (see [below for nested schema](#nestedatt--flow_distributions))

### Optional

- `name` (String)
- `status` (String) Options are `disabled`, `enabled`.
- `trigger` (Attributes) (see [below for nested schema](#nestedatt--trigger))

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedatt--flow_distributions"></a>
### Nested Schema for `flow_distributions`

Required:

- `id` (String)
- `version` (Number)

Optional:

- `ip` (Set of String)
- `success_nodes` (Attributes Set) (see [below for nested schema](#nestedatt--flow_distributions--success_nodes))
- `weight` (Number)

<a id="nestedatt--flow_distributions--success_nodes"></a>
### Nested Schema for `flow_distributions.success_nodes`

Required:

- `id` (String)



<a id="nestedatt--trigger"></a>
### Nested Schema for `trigger`

Optional:

- `configuration` (Attributes) (see [below for nested schema](#nestedatt--trigger--configuration))
- `type` (String)

<a id="nestedatt--trigger--configuration"></a>
### Nested Schema for `trigger.configuration`

Optional:

- `mfa` (Attributes) (see [below for nested schema](#nestedatt--trigger--configuration--mfa))
- `pwd` (Attributes) (see [below for nested schema](#nestedatt--trigger--configuration--pwd))

<a id="nestedatt--trigger--configuration--mfa"></a>
### Nested Schema for `trigger.configuration.mfa`

Optional:

- `enabled` (Boolean)
- `time` (Number)
- `time_format` (String)


<a id="nestedatt--trigger--configuration--pwd"></a>
### Nested Schema for `trigger.configuration.pwd`

Optional:

- `enabled` (Boolean)
- `time` (Number)
- `time_format` (String)

## Import

Import is supported using the following syntax, where attributes in `<>` brackets are replaced with the relevant ID.  For example, `<environment_id>` should be replaced with the ID of the environment to import from.

```shell
terraform import pingone_davinci_application_flow_policy.example <environment_id>/<application_id>/<flow_policy_id>
```